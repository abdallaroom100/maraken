# نظام إدارة الموظفين - Frontend

## نظرة عامة

تم تحديث واجهة المستخدم لإدارة الموظفين والرواتب مع ربطها بالـ API الجديد. النظام يتكون من صفحتين رئيسيتين:

1. **صفحة الموظفين الرئيسية** - لإضافة وعرض الموظفين
2. **صفحة تعديل الموظف** - لتعديل البيانات وإدارة الرواتب

## الصفحات

### 1. صفحة الموظفين الرئيسية (`/employees`)

#### المميزات:
- ✅ إضافة موظفين جدد (البيانات الأساسية فقط)
- ✅ عرض قائمة الموظفين في جدول منظم
- ✅ حذف موظف (soft delete)
- ✅ الانتقال لصفحة التعديل
- ✅ إحصائيات سريعة (إجمالي الرواتب، عدد الموظفين)

#### الحقول المطلوبة:
- **اسم الموظف** (مطلوب)
- **الوظيفة** (مطلوب)
- **الراتب الأساسي** (مطلوب)
- **رقم الهوية** (مطلوب، فريد)

#### كيفية الاستخدام:
1. املأ النموذج بالبيانات المطلوبة
2. اضغط "إضافة موظف"
3. سيتم إضافة الموظف للجدول تلقائياً
4. اضغط "تعديل" للانتقال لصفحة إدارة الرواتب

### 2. صفحة تعديل الموظف (`/workers/edit/:id`)

#### المميزات:
- ✅ عرض معلومات الموظف الحالية
- ✅ تحديث البيانات الأساسية
- ✅ إدارة الرواتب الشهرية
- ✅ دفع الرواتب
- ✅ عرض تاريخ الرواتب
- ✅ حساب تلقائي للراتب النهائي

#### أقسام الصفحة:

##### أ. معلومات الموظف
- عرض البيانات الحالية في بطاقة ملونة
- إمكانية تحديث البيانات

##### ب. إدارة الرواتب
- تحديد السنة والشهر
- إدخال الراتب الأساسي
- إدخال أيام الغياب
- إدخال الحوافز
- إدخال الخصومات
- إدخال السحبيات
- إضافة ملاحظات

##### ج. تاريخ الرواتب
- جدول يعرض جميع الرواتب المسجلة
- حالة كل راتب (تم الدفع / لم يتم الدفع)
- إمكانية دفع الرواتب غير المدفوعة

## التصميم

### الألوان المستخدمة:
- **الأزرق**: `#007bff` (الأزرار الرئيسية)
- **الأخضر**: `#28a745` (أزرار التعديل)
- **الأحمر**: `#dc3545` (أزرار الحذف)
- **الأصفر**: `#ffc107` (أزرار الدفع)
- **الرمادي**: `#6c757d` (أزرار العودة)

### التدرجات اللونية:
- **الملخص**: تدرج أزرق-بنفسجي
- **معلومات الموظف**: تدرج وردي-أحمر
- **رؤوس الجداول**: تدرج أزرق-بنفسجي

### التصميم المتجاوب:
- يعمل على جميع أحجام الشاشات
- تخطيط عمودي للموبايل
- أزرار منظمة للمس

## API Integration

### Endpoints المستخدمة:

#### إدارة الموظفين:
```javascript
// جلب جميع الموظفين
GET /api/workers

// إضافة موظف جديد
POST /api/workers

// جلب موظف محدد
GET /api/workers/:id

// تحديث موظف
PUT /api/workers/:id

// حذف موظف
DELETE /api/workers/:id
```

#### إدارة الرواتب:
```javascript
// إنشاء/تحديث راتب
POST /api/workers/salaries

// دفع راتب
POST /api/workers/salaries/pay

// تاريخ رواتب موظف
GET /api/workers/:id/salary-history
```

## المميزات التقنية

### 1. إدارة الحالة (State Management)
- استخدام React Hooks للتحكم في الحالة
- تحديث تلقائي للبيانات
- معالجة حالات التحميل والأخطاء

### 2. التحقق من البيانات
- التحقق من الحقول المطلوبة
- التحقق من صحة الأرقام
- رسائل خطأ واضحة

### 3. تجربة المستخدم
- رسائل تأكيد للعمليات
- حالات تحميل واضحة
- تصميم بديهي وسهل الاستخدام

### 4. الأمان
- حماية الصفحات
- التحقق من الصلاحيات
- معالجة آمنة للأخطاء

## كيفية التشغيل

### 1. تشغيل الخادم:
```bash
cd server
npm install
npm start
```

### 2. تشغيل العميل:
```bash
cd client
npm install
npm run dev
```

### 3. الوصول للتطبيق:
```
http://localhost:5173
```

## سير العمل (Workflow)

### إضافة موظف جديد:
1. اذهب لصفحة الموظفين
2. املأ النموذج بالبيانات المطلوبة
3. اضغط "إضافة موظف"
4. سيتم إضافة الموظف للجدول

### إدارة رواتب موظف:
1. اضغط "تعديل" بجانب الموظف
2. ستنتقل لصفحة إدارة الرواتب
3. املأ بيانات الراتب الشهري
4. اضغط "حفظ الراتب"
5. اضغط "دفع الراتب" إذا أردت تسجيل الدفع

### تحديث بيانات موظف:
1. اذهب لصفحة تعديل الموظف
2. عدل البيانات المطلوبة
3. اضغط "تحديث البيانات"

## استكشاف الأخطاء

### مشاكل شائعة:

#### 1. خطأ في الاتصال بالخادم:
- تأكد من تشغيل الخادم
- تحقق من عنوان الـ API
- تحقق من إعدادات CORS

#### 2. خطأ في إضافة موظف:
- تأكد من ملء جميع الحقول المطلوبة
- تحقق من عدم تكرار رقم الهوية
- تحقق من صحة الأرقام

#### 3. خطأ في دفع الراتب:
- تأكد من وجود راتب مسجل
- تحقق من عدم دفع الراتب مسبقاً
- تحقق من صحة بيانات الدفع

## التطوير المستقبلي

### ميزات مقترحة:
- [ ] تصدير التقارير بصيغة PDF
- [ ] إشعارات للرواتب المستحقة
- [ ] نظام إجازات متكامل
- [ ] تقارير إحصائية متقدمة
- [ ] نظام تنبيهات للموظفين
- [ ] دعم المدفوعات الإلكترونية

### تحسينات تقنية:
- [ ] استخدام React Query للـ caching
- [ ] إضافة TypeScript interfaces محسنة
- [ ] تحسين الأداء مع البيانات الكبيرة
- [ ] إضافة unit tests
- [ ] تحسين accessibility 